{"ast":null,"code":"import _objectSpread from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _defineProperty from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\src\\\\components\\\\Edit\\\\EditPost.jsx\";\nimport React from 'react';\nimport axios from 'axios';\nimport Banner from '../Banner';\nimport ReactQuill from 'react-quill';\nimport CreatableSelect from 'react-select/creatable';\n\nvar EditPost =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditPost, _React$Component);\n\n  function EditPost(props) {\n    var _this;\n\n    _classCallCheck(this, EditPost);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditPost).call(this, props));\n    _this.modules = {\n      toolbar: [[{\n        'header': [1, 2, 3, 4, false]\n      }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n        'align': []\n      }], [{\n        'list': 'ordered'\n      }, {\n        'list': 'bullet'\n      }, {\n        'indent': '-1'\n      }, {\n        'indent': '+1'\n      }], ['link'], ['clean']]\n    };\n    _this.formats = ['header', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'align', 'list', 'bullet', 'indent', 'link', 'image'];\n\n    _this.handleInputChange = function (html) {\n      _this.setState({\n        content: html\n      });\n\n      console.log(_this.state.content);\n    };\n\n    _this.onHandelInputChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n\n      console.log(_this.state.title);\n    };\n\n    _this.onClickSave = function (event) {\n      event.preventDefault();\n      axios({\n        method: \"PUT\",\n        url: \"/api/post/\" + _this.state.post.id,\n        data: {\n          title: _this.state.title,\n          content: _this.state.content,\n          intro: _this.state.intro,\n          status: \"public\",\n          author: localStorage.getItem('userName'),\n          categories: _this.state.categories,\n          cover: _this.state.cover\n        },\n        headers: {\n          Authorization: \"Bearer\" + localStorage.getItem(\"userToken\")\n        }\n      }).then(function (res) {\n        window.location.replace('/post/' + _this.state.post.id);\n      }).catch(function (err) {\n        console.log(err.response);\n      });\n    };\n\n    _this.handleChange = function (newValue, actionMeta) {\n      console.log(newValue);\n\n      _this.setState({\n        // categories : newValue ? newValue.map(x => x.value) : [],\n        categories: newValue\n      });\n    };\n\n    _this.handleImageChange = function (event) {\n      console.log(event.target);\n\n      if (event.target.files && event.target.files[0]) {\n        var img = event.target.files[0];\n        var data = new FormData();\n        data.append(\"image\", img);\n        axios.post('/api/image/create', data, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n          }\n        }).then(function (res) {\n          _this.setState({\n            editorHtml: _this.state.editorHtml + '<img src=\"' + res.data.path + '\" />'\n          });\n        }).catch(function (errors) {\n          console.log(errors.response);\n          alert(errors.response.data.errors);\n        });\n      }\n    };\n\n    _this.handleCoverChange = function (event) {\n      if (event.target.files && event.target.files[0]) {\n        var img = event.target.files[0];\n        var data = new FormData();\n        data.append(\"image\", img);\n        axios.post('/api/image/create', data, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n          }\n        }).then(function (res) {\n          _this.setState({\n            cover: res.data.path\n          });\n        }).catch(function (errors) {\n          console.log(errors.response);\n          alert(errors.response.data.errors);\n        });\n      }\n    };\n\n    _this.state = {\n      title: '',\n      content: '',\n      intro: '',\n      categories: [],\n      options: [],\n      post: [],\n      selected: false,\n      cover: ''\n    };\n    return _this;\n  }\n\n  _createClass(EditPost, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios({\n        method: \"GET\",\n        url: \"/api/post/\" + this.props.match.params.id + \"/edit\",\n        headers: {\n          Authorization: \"Bearer\" + localStorage.getItem(\"userToken\")\n        }\n      }).then(function (res) {\n        _this2.setState({\n          post: res.data.post,\n          title: res.data.post.title,\n          content: res.data.post.content,\n          intro: res.data.post.intro,\n          cover: res.data.post.cover,\n          categories: res.data.post.categories ? res.data.post.categories.map(function (x) {\n            console.log(x);\n            var data = {\n              label: x.name,\n              value: x.name\n            };\n            return data;\n          }) : []\n        });\n\n        console.log(_this2.state.categories);\n      });\n      axios.get('/api/category').then(function (res) {\n        _this2.setState({\n          options: res.data.categories ? res.data.categories.map(function (x) {\n            var data = {\n              label: x.name,\n              value: x.name,\n              is_selected: false\n            };\n            return data;\n          }) : []\n        });\n\n        _this2.state.categories.forEach(function (category) {\n          _this2.setState(function (prevState) {\n            return {\n              options: prevState.options.map(function (old_options) {\n                return old_options.value == category.value ? _objectSpread({}, old_options, {\n                  is_selected: true\n                }) : old_options;\n              })\n            };\n          });\n        });\n\n        _this2.setState({\n          selected: true\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(Banner, {\n        backgroundImage: \"url(\" + this.state.cover + \")\",\n        title: \"Latest Blog Posts\",\n        subtitle: \"Read and get updated on the latest posts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(\"main\", {\n        className: \"main-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"p-30 bg-gray rounded\",\n        method: \"POST\",\n        \"data-form\": \"mailer\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group col-12 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control form-control-lg\",\n        type: \"text\",\n        placeholder: \"Nh\\u1EADp title n\\u1ED5i b\\u1EADt\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: this.onHandelInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"form-control form-control-lg\",\n        rows: 2,\n        placeholder: \"T\\xF3m t\\u1EAFt ch\\u1EE7 \\u0111\\u1EC1 b\\xE0i vi\\u1EBFt\",\n        name: \"intro\",\n        defaultValue: \"\",\n        value: this.state.intro,\n        onChange: this.onHandelInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"imageInput112\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Chon \\u1EA2nh b\\xECa cho b\\xE0i vi\\u1EBFt \"), React.createElement(\"input\", {\n        type: \"file\",\n        class: \"form-control-file\",\n        id: \"imageInput112\",\n        onChange: this.handleCoverChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group col-12 col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, this.state.selected == false ? React.createElement(React.Fragment, null) : React.createElement(CreatableSelect, {\n        isMulti: true,\n        closeMenuOnSelect: false,\n        defaultValue: this.state.options.filter(function (option) {\n          return option.is_selected == true;\n        }),\n        onChange: this.handleChange,\n        options: this.state.options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          height: \"1000px\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-editor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, this.state.title !== '' ? React.createElement(ReactQuill, {\n        theme: \"snow\",\n        modules: this.modules,\n        formats: this.formats,\n        value: this.state.content,\n        style: {\n          height: '45rem'\n        },\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }) : React.createElement(React.Fragment, null))), React.createElement(\"div\", {\n        className: \"col-6 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          height: \"46px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, \"B\\xE0i vi\\u1EBFt\"), React.createElement(\"div\", {\n        className: \"text-editor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"quill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(ReactQuill, {\n        theme: \"bubble\",\n        readOnly: true,\n        value: this.state.content,\n        style: {\n          height: '45rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      })))), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        style: {\n          paddingLeft: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"imageInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Th\\xEAm \\u1EA3nh v\\xE0o b\\xE0i vi\\u1EBFt \"), React.createElement(\"input\", {\n        type: \"file\",\n        class: \"form-control-file\",\n        id: \"imageInput\",\n        onChange: this.handleImageChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262\n        },\n        __self: this\n      }))))), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        style: {\n          textAlign: 'center',\n          marginLeft: '850px',\n          marginBottom: '20px'\n        },\n        onClick: this.onClickSave,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267\n        },\n        __self: this\n      }, \"\\u0110\\u0103ng b\\xE0i\"));\n    }\n  }]);\n\n  return EditPost;\n}(React.Component);\n\nexport default EditPost;","map":{"version":3,"sources":["F:\\xampp\\htdocs\\kaopiz_fontend_final\\src\\components\\Edit\\EditPost.jsx"],"names":["React","axios","Banner","ReactQuill","CreatableSelect","EditPost","props","modules","toolbar","formats","handleInputChange","html","setState","content","console","log","state","onHandelInputChange","event","target","name","value","title","onClickSave","preventDefault","method","url","post","id","data","intro","status","author","localStorage","getItem","categories","cover","headers","Authorization","then","res","window","location","replace","catch","err","response","handleChange","newValue","actionMeta","handleImageChange","files","img","FormData","append","editorHtml","path","errors","alert","handleCoverChange","options","selected","match","params","map","x","label","get","is_selected","forEach","category","prevState","old_options","handleSubmit","filter","option","height","padding","paddingLeft","textAlign","marginLeft","marginBottom","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport axios from 'axios'\r\nimport Banner from '../Banner'\r\nimport ReactQuill from 'react-quill'\r\nimport CreatableSelect from 'react-select/creatable';\r\n\r\nclass EditPost extends React.Component {\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n            title:'',\r\n            content:'',\r\n            intro :'',\r\n            categories : [],\r\n            options : [],\r\n            post: [],\r\n            selected : false,\r\n            cover : ''\r\n        }\r\n    }\r\n\r\n    modules = {\r\n        toolbar: [\r\n          [{ 'header': [1, 2, 3, 4, false] }],\r\n          ['bold', 'italic', 'underline','strike', 'blockquote'],\r\n          [{'align': []}],\r\n          [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}],\r\n          ['link'],\r\n          ['clean']\r\n        ],\r\n      }\r\n    \r\n      formats = [\r\n        'header',\r\n        'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n        'align',\r\n        'list', 'bullet', 'indent',\r\n        'link', 'image'\r\n      ]\r\n\r\n    componentDidMount(){\r\n        axios({\r\n            method:\"GET\",\r\n            url:\"/api/post/\"+this.props.match.params.id+\"/edit\",\r\n            headers : {\r\n                Authorization: \"Bearer\" + localStorage.getItem(\"userToken\")\r\n            },\r\n        }).then(res=>{\r\n            this.setState({\r\n                post : res.data.post,\r\n                title : res.data.post.title,\r\n                content : res.data.post.content,\r\n                intro : res.data.post.intro,\r\n                cover : res.data.post.cover,\r\n                categories : res.data.post.categories ? res.data.post.categories.map(x => {\r\n                    console.log(x)\r\n                    var data = ({\r\n                        label : x.name,\r\n                        value : x.name,\r\n                    })\r\n                    return data\r\n                }) : [],\r\n            })\r\n            console.log(this.state.categories)\r\n        })\r\n        axios.get('/api/category').then(res => {\r\n            this.setState({\r\n                options: res.data.categories ? res.data.categories.map(x => {\r\n                    var data = ({\r\n                        label : x.name,\r\n                        value : x.name,\r\n                        is_selected : false,\r\n                    })\r\n                    return data\r\n                }) : []\r\n            })\r\n            this.state.categories.forEach( category => {\r\n                    this.setState(prevState=>({\r\n                        options : prevState.options.map(\r\n                            old_options => old_options.value == category.value ? { ...old_options, is_selected: true } : old_options\r\n                        )\r\n                    })\r\n                    )\r\n            })\r\n            this.setState({\r\n                selected : true,\r\n            }\r\n            )\r\n        })\r\n    }\r\n\r\n    handleInputChange = html => {\r\n        this.setState({content : html})\r\n        console.log(this.state.content)\r\n        \r\n      }\r\n\r\n    onHandelInputChange = (event) => {\r\n        this.setState({\r\n            [event.target.name] : event.target.value\r\n        })\r\n        console.log(this.state.title)\r\n    }\r\n\r\n    onClickSave = (event) => {\r\n        event.preventDefault()\r\n        axios({\r\n            method : \"PUT\",\r\n            url : \"/api/post/\"+ this.state.post.id,\r\n            data : {\r\n                title: this.state.title,\r\n                content : this.state.content,\r\n                intro: this.state.intro,\r\n                status : \"public\",\r\n                author : localStorage.getItem('userName'),\r\n                categories : this.state.categories,\r\n                cover : this.state.cover\r\n            },\r\n            headers : {\r\n                Authorization: \"Bearer\" + localStorage.getItem(\"userToken\")\r\n            },\r\n        }).then(res=> {\r\n            window.location.replace('/post/'+this.state.post.id)\r\n        }).catch(err =>{\r\n            console.log(err.response)\r\n        })\r\n    }\r\n\r\n    handleChange = (newValue, actionMeta) => {\r\n        console.log(newValue);  \r\n        this.setState({\r\n            // categories : newValue ? newValue.map(x => x.value) : [],\r\n            categories : newValue,\r\n        })\r\n    };\r\n\r\n    handleImageChange = event => {\r\n        console.log(event.target)\r\n        if (event.target.files && event.target.files[0]) {\r\n          let img = event.target.files[0];\r\n          var data = new FormData()\r\n          data.append(\"image\", img)\r\n          axios.post('/api/image/create',data, {\r\n              headers : {\r\n                  'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")\r\n              }\r\n          }).then(res => {\r\n            this.setState({\r\n              editorHtml : this.state.editorHtml + '<img src=\"'+res.data.path+'\" />'\r\n            })\r\n          }).catch(errors => {\r\n              console.log(errors.response);\r\n              alert(errors.response.data.errors)\r\n          })\r\n        }\r\n      }\r\n\r\n    handleCoverChange = event => {\r\n        if (event.target.files && event.target.files[0]) {\r\n          let img = event.target.files[0];\r\n          var data = new FormData()\r\n          data.append(\"image\", img)\r\n          axios.post('/api/image/create',data, {\r\n              headers : {\r\n                  'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")\r\n              }\r\n          }).then(res => {\r\n            this.setState({\r\n              cover : res.data.path,\r\n            })\r\n          }).catch(errors => {\r\n              console.log(errors.response);\r\n              alert(errors.response.data.errors)\r\n          })\r\n        }\r\n      }\r\n\r\n    render(){\r\n        return(\r\n            <>\r\n            <Banner\r\n                backgroundImage={\"url(\"+this.state.cover+\")\"}\r\n                title=\"Latest Blog Posts\"\r\n                subtitle=\"Read and get updated on the latest posts\"\r\n            />\r\n            <main className=\"main-content\"> \r\n\r\n            <form className=\"p-30 bg-gray rounded\" method=\"POST\" data-form=\"mailer\" onSubmit={this.handleSubmit}>\r\n            <div className=\"row\">\r\n            <div className=\"form-group col-12 \">\r\n                <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"Nhập title nổi bật\" name=\"title\" value={this.state.title} onChange={this.onHandelInputChange}/>\r\n                {/* {\r\n                        this.state.errors['title'] &&\r\n                        <small className=\"text-danger\">{this.state.errors['title']}</small>\r\n\r\n                    } */}\r\n                </div>\r\n\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <textarea className=\"form-control form-control-lg\" rows={2} placeholder=\"Tóm tắt chủ đề bài viết\" name=\"intro\" defaultValue={\"\"} value={this.state.intro}  onChange={this.onHandelInputChange}/>\r\n                {/* {\r\n                        this.state.errors['intro'] &&\r\n                        <small className=\"text-danger\">{this.state.errors['intro']}</small>\r\n\r\n                    } */}\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label htmlFor='imageInput112' >Chon Ảnh bìa cho bài viết </label>\r\n              <input type=\"file\" class=\"form-control-file\" id='imageInput112'  onChange={this.handleCoverChange}/>\r\n            </div>\r\n\r\n            <div className=\"form-group col-12 col-md-6\">\r\n                {this.state.selected == false ? <></> : \r\n                <CreatableSelect\r\n                    isMulti\r\n                    closeMenuOnSelect={false}\r\n                    defaultValue={this.state.options.filter(option => option.is_selected == true)}\r\n                    onChange={this.handleChange}\r\n                    options={this.state.options}\r\n                />\r\n                }\r\n            \r\n                </div>\r\n            </form>\r\n          <div className=\"row\" style={{height: \"1000px\", padding: \"10px\"}}>\r\n            <div className=\"col-6\">\r\n            <div className=\"text-editor\" >\r\n                {this.state.title !== '' ? <ReactQuill \r\n                    theme=\"snow\"\r\n                    modules={this.modules}\r\n                    formats={this.formats}  \r\n                    value={this.state.content}\r\n                    style={{height: '45rem'}}\r\n                    onChange={this.handleInputChange}\r\n                >\r\n                </ReactQuill> : <></>}\r\n                \r\n            </div>\r\n            </div>\r\n            <div className=\"col-6 \" >\r\n            <div className=\"container\" style={{height: \"46px\"}}>\r\n                Bài viết\r\n            </div>\r\n            <div className=\"text-editor\" >\r\n              <div className='quill'>\r\n                <ReactQuill \r\n                  theme=\"bubble\"\r\n                    readOnly\r\n                    value={this.state.content}\r\n                    style={{height: '45rem'}}\r\n                >\r\n                </ReactQuill>\r\n              </div>\r\n            </div>\r\n                \r\n            </div>\r\n            <form>\r\n            <div class=\"form-group\" style={{paddingLeft:'20px'}}>\r\n              <label htmlFor='imageInput' >Thêm ảnh vào bài viết </label>\r\n              <input type=\"file\" class=\"form-control-file\" id='imageInput'  onChange={this.handleImageChange}/>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        </main>\r\n        <button type=\"submit\" className=\"btn btn-primary\" style={{textAlign : 'center', marginLeft : '850px', marginBottom:'20px'}} onClick={this.onClickSave}>\r\n          Đăng bài\r\n      </button>\r\n            </>\r\n            \r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default EditPost"]},"metadata":{},"sourceType":"module"}