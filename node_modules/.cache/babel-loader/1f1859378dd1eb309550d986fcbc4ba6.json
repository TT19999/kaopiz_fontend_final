{"ast":null,"code":"import _regeneratorRuntime from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\src\\\\components\\\\Createpost\\\\CreatePost.jsx\";\nimport React from 'react';\nimport Select from 'react-select';\nimport Banner from './../Banner';\nimport { validateAll } from 'indicative';\nimport axios from 'axios';\nimport Demo from './Demo';\n\nvar Createpost =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Createpost, _React$Component);\n\n  function Createpost(props) {\n    var _this;\n\n    _classCallCheck(this, Createpost);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Createpost).call(this, props));\n    _this.options = [{\n      label: \"PHP\",\n      value: \"1\"\n    }, {\n      label: \"Laravel\",\n      value: \"2\"\n    }, {\n      label: \"Nodejs\",\n      value: \"3\"\n    }, {\n      label: \"Angulajs\",\n      value: \"4\"\n    }, {\n      label: \"JS\",\n      value: \"5\"\n    }, {\n      label: \"Java\",\n      value: \"6\"\n    }, {\n      label: \"Python\",\n      value: \"7\"\n    }];\n\n    _this.onSelectedOptionsChange = function (event) {\n      _this.setState({\n        category: event ? event.map(function (x) {\n          return x.value;\n        }) : [],\n        selects: event ? event.map(function (x) {\n          return x.label;\n        }) : []\n      });\n\n      console.log(_this.state.category);\n    };\n\n    _this.onHandleInputChange = function (event) {\n      var _this$setState;\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, event.target.name, event.target.value), _defineProperty(_this$setState, \"errors\", []), _this$setState));\n    };\n\n    _this.rules = {\n      title: 'required|string|max:255',\n      content: 'required',\n      author: 'required',\n      intro: 'required',\n      conclusion: 'required',\n      cover: 'required|string'\n    };\n    _this.messages = {\n      required: 'The {{ field }} is required.',\n      max: 'the title max 255'\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      console.log(_this.state); // validating user data\n\n      var data = {};\n      validateAll(data, _this.rules, _this.messages).then(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.post('http://127.0.0.1:8000/api/register', {\n                  first_name: _this.state.first_name,\n                  last_name: _this.state.last_name,\n                  email: _this.state.email,\n                  password: _this.state.password,\n                  password_confirmation: _this.state.password_confirmation,\n                  subject: _this.state.subject\n                }).then(function (response) {\n                  console.log('b');\n\n                  if (response.status == 201) {\n                    window.location.replace('/login');\n                  }\n                }).catch(function (errors) {\n                  console.log(errors.response);\n                  alert(errors.response.data.errors);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }))).catch(function (errors) {\n        console.log('a');\n        console.log(errors);\n        var formattedErrors = {};\n        errors.forEach(function (error) {\n          return formattedErrors[error.field] = error.message;\n        });\n\n        _this.setState({\n          errors: formattedErrors\n        });\n      });\n    };\n\n    _this.onCoverChange = function (event) {\n      if (event.target.files && event.target.files[0]) {\n        var img = event.target.files[0];\n        var data = new FormData();\n        data.append(\"cover\", img);\n        axios.post('http://127.0.0.1:8000/api/post/cover/update', data, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n          }\n        }).then(function (res) {\n          _this.setState({\n            cover: res.data.path\n          });\n\n          console.log(_this.state.cover);\n          console.log('a');\n          alert(res.data.message);\n        }).catch(function (errors) {\n          alert(errors.response.data.errors);\n        });\n      }\n    };\n\n    _this.state = {\n      title: '',\n      content: '',\n      conclusion: '',\n      intro: '',\n      author: '',\n      cover: '',\n      errors: [],\n      category: [],\n      selects: []\n    };\n    return _this;\n  }\n\n  _createClass(Createpost, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(\"http://127.0.0.1:8000/api/category\").then(function (res) {\n        _this2.setState({\n          category: res.data.category\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(Banner, {\n        backgroundImage: \"url(\".concat(process.env.PUBLIC_URL, \"/assets/img/bg-laptop.jpg)\"),\n        title: \"Write New Post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"main\", {\n        className: \"main-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        className: \"section\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-12 col-lg-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"p-30 bg-gray rounded\",\n        method: \"POST\",\n        \"data-form\": \"mailer\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group col-12 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control form-control-lg\",\n        type: \"text\",\n        name: \"title\",\n        placeholder: \"Title\",\n        onChange: this.onHandleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), this.state.errors['title'] && React.createElement(\"small\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, this.state.errors['title']))), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group col-md-12 my-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"file\",\n        className: \"form-control\",\n        name: \"cover\",\n        onChange: this.onCoverChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), this.state.errors['cover'] && React.createElement(\"small\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, this.state.errors['cover'])), React.createElement(\"div\", {\n        className: \"form-group col-12 col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control form-control-lg\",\n        type: \"text\",\n        name: \"author\",\n        placeholder: \"Author\",\n        onChange: this.onHandleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }), this.state.errors['author'] && React.createElement(\"small\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, this.state.errors['author'])), React.createElement(\"div\", {\n        className: \"form-group col-12 col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Select, {\n        isMulti: true,\n        name: \"category\",\n        options: this.options,\n        onChange: this.onSelectedOptionsChange,\n        className: \"basic-multi-select\",\n        classNamePrefix: \"Category\",\n        placeholder: \"Category\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"form-control form-control-lg\",\n        rows: 2,\n        placeholder: \"Intro\",\n        name: \"intro\",\n        defaultValue: \"\",\n        onChange: this.onHandleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), this.state.errors['intro'] && React.createElement(\"small\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, this.state.errors['intro'])), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"form-control form-control-lg\",\n        rows: 4,\n        placeholder: \"Content\",\n        name: \"content\",\n        defaultValue: \"\",\n        onChange: this.onHandleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }), this.state.errors['content'] && React.createElement(\"small\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, this.state.errors['content'])), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"form-control form-control-lg\",\n        rows: 2,\n        placeholder: \"Conclusion\",\n        name: \"conclusion\",\n        defaultValue: \"\",\n        onChange: this.onHandleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), this.state.errors['conclusion'] && React.createElement(\"small\", {\n        className: \"text-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, this.state.errors['conclusion'])), React.createElement(\"div\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-lg btn-primary\",\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, \"Create Post\")))))))));\n    }\n  }]);\n\n  return Createpost;\n}(React.Component);\n\nexport default Createpost;","map":{"version":3,"sources":["F:\\xampp\\htdocs\\kaopiz_fontend_final\\src\\components\\Createpost\\CreatePost.jsx"],"names":["React","Select","Banner","validateAll","axios","Demo","Createpost","props","options","label","value","onSelectedOptionsChange","event","setState","category","map","x","selects","console","log","state","onHandleInputChange","target","name","rules","title","content","author","intro","conclusion","cover","messages","required","max","handleSubmit","preventDefault","data","then","post","first_name","last_name","email","password","password_confirmation","subject","response","status","window","location","replace","catch","errors","alert","formattedErrors","forEach","error","field","message","onCoverChange","files","img","FormData","append","headers","localStorage","getItem","res","path","get","process","env","PUBLIC_URL","Component"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,WAAT,QAA4B,YAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;;IAEMC,U;;;;;AAEF,sBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AACd,oFAAMA,KAAN;AADc,UAelBC,OAfkB,GAeR,CACN;AAAEC,MAAAA,KAAK,EAAE,KAAT;AAAgBC,MAAAA,KAAK,EAAE;AAAvB,KADM,EAEN;AAAED,MAAAA,KAAK,EAAE,SAAT;AAAoBC,MAAAA,KAAK,EAAE;AAA3B,KAFM,EAGN;AAAED,MAAAA,KAAK,EAAE,QAAT;AAAmBC,MAAAA,KAAK,EAAE;AAA1B,KAHM,EAIN;AAAED,MAAAA,KAAK,EAAE,UAAT;AAAqBC,MAAAA,KAAK,EAAE;AAA5B,KAJM,EAKN;AAAED,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,KAAK,EAAE;AAAtB,KALM,EAMN;AAAED,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,KAAK,EAAE;AAAxB,KANM,EAON;AAAED,MAAAA,KAAK,EAAE,QAAT;AAAmBC,MAAAA,KAAK,EAAE;AAA1B,KAPM,CAfQ;;AAAA,UAiClBC,uBAjCkB,GAiCO,UAACC,KAAD,EAAW;AAChC,YAAKC,QAAL,CAAc;AACVC,QAAAA,QAAQ,EAAGF,KAAK,GAAGA,KAAK,CAACG,GAAN,CAAU,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACN,KAAN;AAAA,SAAX,CAAH,GAA6B,EADnC;AAEVO,QAAAA,OAAO,EAAGL,KAAK,GAAGA,KAAK,CAACG,GAAN,CAAU,UAAAC,CAAC;AAAA,iBAAIA,CAAC,CAACP,KAAN;AAAA,SAAX,CAAH,GAA6B;AAFlC,OAAd;;AAIAS,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWN,QAAvB;AACH,KAvCiB;;AAAA,UAyClBO,mBAzCkB,GAyCG,UAAAT,KAAK,EAAG;AAAA;;AACzB,YAAKC,QAAL,uDACKD,KAAK,CAACU,MAAN,CAAaC,IADlB,EAC0BX,KAAK,CAACU,MAAN,CAAaZ,KADvC,6CAEY,EAFZ;AAIH,KA9CiB;;AAAA,UAgDlBc,KAhDkB,GAgDV;AACJC,MAAAA,KAAK,EAAG,yBADJ;AAEJC,MAAAA,OAAO,EAAC,UAFJ;AAGJC,MAAAA,MAAM,EAAE,UAHJ;AAIJC,MAAAA,KAAK,EAAE,UAJH;AAKJC,MAAAA,UAAU,EAAE,UALR;AAMJC,MAAAA,KAAK,EAAE;AANH,KAhDU;AAAA,UAwDfC,QAxDe,GAwDJ;AACVC,MAAAA,QAAQ,EAAE,8BADA;AAEVC,MAAAA,GAAG,EAAG;AAFI,KAxDI;;AAAA,UA4DhBC,YA5DgB,GA4DD,UAACtB,KAAD,EAAW;AACxBA,MAAAA,KAAK,CAACuB,cAAN;AACAjB,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAjB,EAFwB,CAGxB;;AACA,UAAMgB,IAAI,GAAG,EAAb;AAKAjC,MAAAA,WAAW,CAACiC,IAAD,EAAM,MAAKZ,KAAX,EAAkB,MAAKO,QAAvB,CAAX,CACCM,IADD;AAAA;AAAA;AAAA;AAAA,+BACM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEEjC,KAAK,CAACkC,IAAN,CAAW,oCAAX,EAAiD;AACrDC,kBAAAA,UAAU,EAAE,MAAKnB,KAAL,CAAWmB,UAD8B;AAErDC,kBAAAA,SAAS,EAAC,MAAKpB,KAAL,CAAWoB,SAFgC;AAGrDC,kBAAAA,KAAK,EAAE,MAAKrB,KAAL,CAAWqB,KAHmC;AAIrDC,kBAAAA,QAAQ,EAAE,MAAKtB,KAAL,CAAWsB,QAJgC;AAKrDC,kBAAAA,qBAAqB,EAAE,MAAKvB,KAAL,CAAWuB,qBALmB;AAMrDC,kBAAAA,OAAO,EAAG,MAAKxB,KAAL,CAAWwB;AANgC,iBAAjD,EAOHP,IAPG,CAOE,UAAAQ,QAAQ,EAAK;AACnB3B,kBAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;;AACA,sBAAG0B,QAAQ,CAACC,MAAT,IAAmB,GAAtB,EAA2B;AACzBC,oBAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,QAAxB;AACD;AAEF,iBAbK,EAaHC,KAbG,CAaG,UAAAC,MAAM,EAAI;AACjBjC,kBAAAA,OAAO,CAACC,GAAR,CAAYgC,MAAM,CAACN,QAAnB;AACAO,kBAAAA,KAAK,CAACD,MAAM,CAACN,QAAP,CAAgBT,IAAhB,CAAqBe,MAAtB,CAAL;AACD,iBAhBK,CAFF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADN,IAqBCD,KArBD,CAqBO,UAAAC,MAAM,EAAI;AACfjC,QAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAYgC,MAAZ;AACA,YAAME,eAAe,GAAG,EAAxB;AACAF,QAAAA,MAAM,CAACG,OAAP,CAAe,UAAAC,KAAK;AAAA,iBAAIF,eAAe,CAACE,KAAK,CAACC,KAAP,CAAf,GAA+BD,KAAK,CAACE,OAAzC;AAAA,SAApB;;AACA,cAAK5C,QAAL,CAAc;AACZsC,UAAAA,MAAM,EAAEE;AADI,SAAd;AAGD,OA7BD;AA8BD,KAnGe;;AAAA,UAqGhBK,aArGgB,GAqGA,UAAA9C,KAAK,EAAI;AACvB,UAAIA,KAAK,CAACU,MAAN,CAAaqC,KAAb,IAAsB/C,KAAK,CAACU,MAAN,CAAaqC,KAAb,CAAmB,CAAnB,CAA1B,EAAiD;AAC7C,YAAIC,GAAG,GAAGhD,KAAK,CAACU,MAAN,CAAaqC,KAAb,CAAmB,CAAnB,CAAV;AACA,YAAIvB,IAAI,GAAG,IAAIyB,QAAJ,EAAX;AACAzB,QAAAA,IAAI,CAAC0B,MAAL,CAAY,OAAZ,EAAqBF,GAArB;AACAxD,QAAAA,KAAK,CAACkC,IAAN,CAAW,6CAAX,EAAyDF,IAAzD,EAA+D;AAC3D2B,UAAAA,OAAO,EAAG;AACN,6BAAkB,YAAYC,YAAY,CAACC,OAAb,CAAqB,WAArB;AADxB;AADiD,SAA/D,EAIG5B,IAJH,CAIQ,UAAA6B,GAAG,EAAI;AACX,gBAAKrD,QAAL,CAAc;AACViB,YAAAA,KAAK,EAAGoC,GAAG,CAAC9B,IAAJ,CAAS+B;AADP,WAAd;;AAGAjD,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWU,KAAvB;AACAZ,UAAAA,OAAO,CAACC,GAAR,CAAY,GAAZ;AACAiC,UAAAA,KAAK,CAACc,GAAG,CAAC9B,IAAJ,CAASqB,OAAV,CAAL;AACH,SAXD,EAWGP,KAXH,CAWS,UAAAC,MAAM,EAAI;AACfC,UAAAA,KAAK,CAACD,MAAM,CAACN,QAAP,CAAgBT,IAAhB,CAAqBe,MAAtB,CAAL;AACH,SAbD;AAcD;AACN,KAzHiB;;AAEd,UAAK/B,KAAL,GAAW;AACRK,MAAAA,KAAK,EAAC,EADE;AAERC,MAAAA,OAAO,EAAC,EAFA;AAGRG,MAAAA,UAAU,EAAC,EAHH;AAIRD,MAAAA,KAAK,EAAC,EAJE;AAKRD,MAAAA,MAAM,EAAC,EALC;AAMRG,MAAAA,KAAK,EAAC,EANE;AAORqB,MAAAA,MAAM,EAAC,EAPC;AAQPrC,MAAAA,QAAQ,EAAE,EARH;AASPG,MAAAA,OAAO,EAAE;AATF,KAAX;AAFc;AAajB;;;;wCAYkB;AAAA;;AACfb,MAAAA,KAAK,CAACgE,GAAN,CAAU,oCAAV,EAAgD/B,IAAhD,CAAqD,UAAA6B,GAAG,EAAI;AACxD,QAAA,MAAI,CAACrD,QAAL,CAAc;AACVC,UAAAA,QAAQ,EAAGoD,GAAG,CAAC9B,IAAJ,CAAStB;AADV,SAAd;AAGH,OAJD;AAKH;;;6BA4FO;AACJ,aACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,MAAD;AACA,QAAA,eAAe,gBAASuD,OAAO,CAACC,GAAR,CAAYC,UAArB,+BADf;AAEA,QAAA,KAAK,EAAC,gBAFN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAOA;AAAM,QAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAS,QAAA,SAAS,EAAC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAM,QAAA,SAAS,EAAC,sBAAhB;AAAuC,QAAA,MAAM,EAAC,MAA9C;AAAqD,qBAAU,QAA/D;AAAwE,QAAA,QAAQ,EAAE,KAAKrC,YAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,IAAI,EAAC,MAArD;AAA4D,QAAA,IAAI,EAAC,OAAjE;AAAyE,QAAA,WAAW,EAAC,OAArF;AAA6F,QAAA,QAAQ,EAAE,KAAKb,mBAA5G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAGY,KAAKD,KAAL,CAAW+B,MAAX,CAAkB,OAAlB,KACA;AAAO,QAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC,KAAK/B,KAAL,CAAW+B,MAAX,CAAkB,OAAlB,CAAhC,CAJZ,CADA,CADA,EAYA;AAAK,QAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,SAAS,EAAC,cAA7B;AAA4C,QAAA,IAAI,EAAC,OAAjD;AAAyD,QAAA,QAAQ,EAAE,KAAKO,aAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAGQ,KAAKtC,KAAL,CAAW+B,MAAX,CAAkB,OAAlB,KACA;AAAO,QAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC,KAAK/B,KAAL,CAAW+B,MAAX,CAAkB,OAAlB,CAAhC,CAJR,CADJ,EASI;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAO,QAAA,SAAS,EAAC,8BAAjB;AAAgD,QAAA,IAAI,EAAC,MAArD;AAA4D,QAAA,IAAI,EAAC,QAAjE;AAA0E,QAAA,WAAW,EAAC,QAAtF;AAA+F,QAAA,QAAQ,EAAE,KAAK9B,mBAA9G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAGQ,KAAKD,KAAL,CAAW+B,MAAX,CAAkB,QAAlB,KACA;AAAO,QAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC,KAAK/B,KAAL,CAAW+B,MAAX,CAAkB,QAAlB,CAAhC,CAJR,CATJ,EAiBI;AAAK,QAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,MAAD;AACY,QAAA,OAAO,MADnB;AAEY,QAAA,IAAI,EAAC,UAFjB;AAGY,QAAA,OAAO,EAAE,KAAK3C,OAH1B;AAIY,QAAA,QAAQ,EAAE,KAAKG,uBAJ3B;AAKY,QAAA,SAAS,EAAC,oBALtB;AAMY,QAAA,eAAe,EAAC,UAN5B;AAOY,QAAA,WAAW,EAAC,UAPxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,CAjBJ,CAZA,EAyCA;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,WAAW,EAAC,OAAxE;AAAgF,QAAA,IAAI,EAAC,OAArF;AAA6F,QAAA,YAAY,EAAE,EAA3G;AAAgH,QAAA,QAAQ,EAAE,KAAKU,mBAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAGY,KAAKD,KAAL,CAAW+B,MAAX,CAAkB,OAAlB,KACA;AAAO,QAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC,KAAK/B,KAAL,CAAW+B,MAAX,CAAkB,OAAlB,CAAhC,CAJZ,CAzCA,EAiDA;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,WAAW,EAAC,SAAxE;AAAkF,QAAA,IAAI,EAAC,SAAvF;AAAiG,QAAA,YAAY,EAAE,EAA/G;AAAoH,QAAA,QAAQ,EAAE,KAAK9B,mBAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAGY,KAAKD,KAAL,CAAW+B,MAAX,CAAkB,SAAlB,KACA;AAAO,QAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC,KAAK/B,KAAL,CAAW+B,MAAX,CAAkB,SAAlB,CAAhC,CAJZ,CAjDA,EAyDA;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAU,QAAA,SAAS,EAAC,8BAApB;AAAmD,QAAA,IAAI,EAAE,CAAzD;AAA4D,QAAA,WAAW,EAAC,YAAxE;AAAqF,QAAA,IAAI,EAAC,YAA1F;AAAuG,QAAA,YAAY,EAAE,EAArH;AAA0H,QAAA,QAAQ,EAAE,KAAK9B,mBAAzI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAGY,KAAKD,KAAL,CAAW+B,MAAX,CAAkB,YAAlB,KACA;AAAO,QAAA,SAAS,EAAC,aAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgC,KAAK/B,KAAL,CAAW+B,MAAX,CAAkB,YAAlB,CAAhC,CAJZ,CAzDA,EAiEA;AAAK,QAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEI;AAAQ,QAAA,SAAS,EAAC,wBAAlB;AAA2C,QAAA,IAAI,EAAC,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFJ,CAjEA,CADJ,CADA,CADJ,CADA,CADJ,CAPA,CADA;AA+FP;;;;EA7NwBnD,KAAK,CAACwE,S;;AA+N/B,eAAelE,UAAf","sourcesContent":["import React from 'react';\r\nimport Select from 'react-select';\r\nimport Banner from './../Banner';\r\nimport { validateAll } from 'indicative';\r\nimport axios from 'axios';\r\nimport Demo from './Demo';\r\n\r\nclass Createpost extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n           title:'',\r\n           content:'',\r\n           conclusion:'',\r\n           intro:'',\r\n           author:'',\r\n           cover:'',\r\n           errors:[],\r\n            category: [],\r\n            selects: [],\r\n        }\r\n    }\r\n\r\n    options = [\r\n        { label: \"PHP\", value: \"1\" },\r\n        { label: \"Laravel\", value: \"2\" },\r\n        { label: \"Nodejs\", value: \"3\" },\r\n        { label: \"Angulajs\", value: \"4\" },\r\n        { label: \"JS\", value: \"5\" },\r\n        { label: \"Java\", value: \"6\" },\r\n        { label: \"Python\", value: \"7\" },\r\n      ];\r\n\r\n    componentDidMount(){\r\n        axios.get(\"http://127.0.0.1:8000/api/category\").then(res => {\r\n            this.setState({\r\n                category : res.data.category\r\n            })\r\n        })\r\n    }\r\n\r\n    onSelectedOptionsChange= (event) => {\r\n        this.setState({\r\n            category : event ? event.map(x => x.value) : [],\r\n            selects : event ? event.map(x => x.label) : []\r\n        })\r\n        console.log(this.state.category)\r\n    }\r\n\r\n    onHandleInputChange= event =>{\r\n        this.setState({\r\n            [event.target.name] : event.target.value,\r\n            errors: [],\r\n        })\r\n    }\r\n\r\n    rules = {\r\n        title:  'required|string|max:255',\r\n        content:'required',\r\n        author: 'required',\r\n        intro: 'required',\r\n        conclusion: 'required',\r\n        cover: 'required|string'\r\n      };\r\n       messages = {\r\n        required: 'The {{ field }} is required.',\r\n        max : 'the title max 255',\r\n      }\r\n      handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        console.log(this.state)\r\n        // validating user data\r\n        const data = {\r\n            \r\n        };\r\n    \r\n        \r\n        validateAll(data,this.rules, this.messages)\r\n        .then(async () => {\r\n          //successfull login\r\n          await axios.post('http://127.0.0.1:8000/api/register', {\r\n            first_name: this.state.first_name,\r\n            last_name:this.state.last_name,\r\n            email: this.state.email,\r\n            password: this.state.password,\r\n            password_confirmation: this.state.password_confirmation,\r\n            subject : this.state.subject,\r\n          }).then(response =>  {\r\n            console.log('b')\r\n            if(response.status == 201) {\r\n              window.location.replace('/login')\r\n            }\r\n            \r\n          }).catch(errors => {\r\n            console.log(errors.response);\r\n            alert(errors.response.data.errors)\r\n          })\r\n        })\r\n        .catch(errors => {\r\n          console.log('a')\r\n          console.log(errors);\r\n          const formattedErrors = {}\r\n          errors.forEach(error => formattedErrors[error.field] = error.message)\r\n          this.setState({\r\n            errors: formattedErrors\r\n          })\r\n        })\r\n      }\r\n\r\n      onCoverChange = event => {\r\n        if (event.target.files && event.target.files[0]) {\r\n            let img = event.target.files[0];\r\n            var data = new FormData()\r\n            data.append(\"cover\", img)\r\n            axios.post('http://127.0.0.1:8000/api/post/cover/update',data, {\r\n                headers : {\r\n                    'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")\r\n                }\r\n            }).then(res => {\r\n                this.setState({\r\n                    cover : res.data.path\r\n                })\r\n                console.log(this.state.cover)\r\n                console.log('a')\r\n                alert(res.data.message)\r\n            }).catch(errors => {\r\n                alert(errors.response.data.errors)\r\n            })\r\n          }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n        <div>\r\n        <Banner\r\n        backgroundImage={`url(${process.env.PUBLIC_URL}/assets/img/bg-laptop.jpg)`}\r\n        title=\"Write New Post\"\r\n        />\r\n        {/* END Header */}\r\n        {/* Main container */}\r\n        <main className=\"main-content\">\r\n            <section className=\"section\">\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                <div className=\"col-12 col-lg-12\">\r\n                    <form className=\"p-30 bg-gray rounded\" method=\"POST\" data-form=\"mailer\" onSubmit={this.handleSubmit}>\r\n                    <div className=\"row\">\r\n                    <div className=\"form-group col-12 \">\r\n                        <input className=\"form-control form-control-lg\" type=\"text\" name=\"title\" placeholder=\"Title\" onChange={this.onHandleInputChange}/>\r\n                        {\r\n                                this.state.errors['title'] &&\r\n                                <small className=\"text-danger\">{this.state.errors['title']}</small>\r\n\r\n                            }\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"form-group col-md-12 my-5\">\r\n                        <input type=\"file\" className=\"form-control\" name=\"cover\" onChange={this.onCoverChange}/>\r\n                        {\r\n                                this.state.errors['cover'] &&\r\n                                <small className=\"text-danger\">{this.state.errors['cover']}</small>\r\n\r\n                        }\r\n                        </div>\r\n                        <div className=\"form-group col-12 col-md-6\">\r\n                        <input className=\"form-control form-control-lg\" type=\"text\" name=\"author\" placeholder=\"Author\" onChange={this.onHandleInputChange}/>\r\n                        {\r\n                                this.state.errors['author'] &&\r\n                                <small className=\"text-danger\">{this.state.errors['author']}</small>\r\n\r\n                            }\r\n                        </div>\r\n                        <div className=\"form-group col-12 col-md-6\">\r\n                        <Select\r\n                                    isMulti\r\n                                    name=\"category\"\r\n                                    options={this.options}\r\n                                    onChange={this.onSelectedOptionsChange}\r\n                                    className=\"basic-multi-select\"\r\n                                    classNamePrefix=\"Category\"\r\n                                    placeholder=\"Category\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <textarea className=\"form-control form-control-lg\" rows={2} placeholder=\"Intro\" name=\"intro\" defaultValue={\"\"}  onChange={this.onHandleInputChange}/>\r\n                        {\r\n                                this.state.errors['intro'] &&\r\n                                <small className=\"text-danger\">{this.state.errors['intro']}</small>\r\n\r\n                            }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <textarea className=\"form-control form-control-lg\" rows={4} placeholder=\"Content\" name=\"content\" defaultValue={\"\"}  onChange={this.onHandleInputChange}/>\r\n                        {\r\n                                this.state.errors['content'] &&\r\n                                <small className=\"text-danger\">{this.state.errors['content']}</small>\r\n\r\n                            }\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <textarea className=\"form-control form-control-lg\" rows={2} placeholder=\"Conclusion\" name=\"conclusion\" defaultValue={\"\"}  onChange={this.onHandleInputChange}/>\r\n                        {\r\n                                this.state.errors['conclusion'] &&\r\n                                <small className=\"text-danger\">{this.state.errors['conclusion']}</small>\r\n\r\n                            }\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                        \r\n                        <button className=\"btn btn-lg btn-primary\" type=\"submit\">Create Post</button>\r\n                    </div>\r\n                    {/* <div className=\"text-md-right\" >\r\n                        <Demo data={this.state}/>\r\n                    </div> */}\r\n                    </form>\r\n                </div>\r\n                </div>\r\n            </div>\r\n            </section>\r\n        </main>\r\n        {/* END Main container */}\r\n        </div>\r\n\r\n  );\r\n};\r\n}\r\nexport default Createpost;"]},"metadata":{},"sourceType":"module"}