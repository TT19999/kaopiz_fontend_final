{"ast":null,"code":"import _regeneratorRuntime from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\src\\\\components\\\\Createpost\\\\CreatePost.jsx\";\nimport React from 'react';\nimport Select from 'react-select';\nimport Banner from './../Banner';\nimport { validateAll } from 'indicative';\nimport axios from 'axios';\nimport Demo from './Demo';\nimport ReactQuill from 'react-quill';\n\nvar Createpost =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Createpost, _React$Component);\n\n  function Createpost(props) {\n    var _this;\n\n    _classCallCheck(this, Createpost);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Createpost).call(this, props));\n    _this.options = [{\n      label: \"PHP\",\n      value: \"1\"\n    }, {\n      label: \"Laravel\",\n      value: \"2\"\n    }, {\n      label: \"Nodejs\",\n      value: \"3\"\n    }, {\n      label: \"Angulajs\",\n      value: \"4\"\n    }, {\n      label: \"JS\",\n      value: \"5\"\n    }, {\n      label: \"Java\",\n      value: \"6\"\n    }, {\n      label: \"Python\",\n      value: \"7\"\n    }];\n\n    _this.onSelectedOptionsChange = function (event) {\n      _this.setState({\n        category: event ? event.map(function (x) {\n          return x.value;\n        }) : [],\n        selects: event ? event.map(function (x) {\n          return x.label;\n        }) : []\n      });\n\n      console.log(_this.state.category);\n    };\n\n    _this.onHandleInputChange = function (event) {\n      var _this$setState;\n\n      _this.setState((_this$setState = {}, _defineProperty(_this$setState, event.target.name, event.target.value), _defineProperty(_this$setState, \"errors\", []), _this$setState));\n    };\n\n    _this.rules = {\n      title: 'required|string|max:255',\n      content: 'required',\n      author: 'required',\n      intro: 'required',\n      conclusion: 'required',\n      cover: 'required|string'\n    };\n    _this.messages = {\n      required: 'The {{ field }} is required.',\n      max: 'the title max 255'\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      console.log(_this.state); // validating user data\n\n      var data = {\n        title: _this.state.title,\n        content: _this.state.content,\n        conclusion: _this.state.conclusion,\n        intro: _this.state.intro,\n        author: _this.state.author,\n        cover: _this.state.cover,\n        category: _this.state.category,\n        status: \"public\"\n      };\n      validateAll(data, _this.rules, _this.messages).then(\n      /*#__PURE__*/\n      _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.post('/api/post', data, {\n                  headers: {\n                    'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n                  }\n                }).then(function (res) {\n                  window.location.replace('/post/' + res.data.post.id);\n                }).catch(function (errors) {\n                  console.log(errors.response);\n                  alert(errors.response.data.errors);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }))).catch(function (errors) {\n        console.log('a');\n        console.log(errors);\n        var formattedErrors = {};\n        errors.forEach(function (error) {\n          return formattedErrors[error.field] = error.message;\n        });\n\n        _this.setState({\n          errors: formattedErrors\n        });\n      });\n    };\n\n    _this.onCoverChange = function (event) {\n      if (event.target.files && event.target.files[0]) {\n        var img = event.target.files[0];\n        var data = new FormData();\n        data.append(\"cover\", img);\n        axios.post('/api/post/cover/update', data, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n          }\n        }).then(function (res) {\n          console.log(res);\n\n          _this.setState({\n            cover: res.data.cover\n          });\n\n          console.log(_this.state.cover);\n          alert(res.data.message);\n        }).catch(function (errors) {\n          alert(errors.response.data.errors);\n        });\n      }\n    };\n\n    _this.state = {\n      title: '',\n      content: '',\n      conclusion: '',\n      intro: '',\n      author: '',\n      cover: '',\n      errors: [],\n      category: [],\n      selects: []\n    };\n    return _this;\n  }\n\n  _createClass(Createpost, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get(\"/api/category\").then(function (res) {\n        _this2.setState({\n          category: res.data.category\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(Banner, {\n        backgroundImage: \"url(\".concat(process.env.PUBLIC_URL, \"/assets/img/bg-laptop.jpg)\"),\n        title: \"Write New Post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(\"main\", {\n        className: \"main-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          height: \"1000px\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-editor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(ReactQuill, {\n        theme: \"snow\",\n        modules: this.modules,\n        formats: this.formats,\n        defaultValue: this.delta,\n        value: this.state.editorHtml,\n        style: {\n          height: '45rem'\n        },\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-6 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          height: \"46px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"B\\xE0i vi\\u1EBFt\"), React.createElement(\"div\", {\n        className: \"ql-editor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: this.state.editorHtml\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Createpost;\n}(React.Component);\n\nexport default Createpost;","map":{"version":3,"sources":["F:\\xampp\\htdocs\\kaopiz_fontend_final\\src\\components\\Createpost\\CreatePost.jsx"],"names":["React","Select","Banner","validateAll","axios","Demo","ReactQuill","Createpost","props","options","label","value","onSelectedOptionsChange","event","setState","category","map","x","selects","console","log","state","onHandleInputChange","target","name","rules","title","content","author","intro","conclusion","cover","messages","required","max","handleSubmit","preventDefault","data","status","then","post","headers","localStorage","getItem","res","window","location","replace","id","catch","errors","response","alert","formattedErrors","forEach","error","field","message","onCoverChange","files","img","FormData","append","get","process","env","PUBLIC_URL","height","padding","modules","formats","delta","editorHtml","handleChange","__html","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Select from 'react-select';\r\nimport Banner from './../Banner';\r\nimport { validateAll } from 'indicative';\r\nimport axios from 'axios';\r\nimport Demo from './Demo';\r\nimport ReactQuill from 'react-quill';\r\n\r\nclass Createpost extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state={\r\n           title:'',\r\n           content:'',\r\n           conclusion:'',\r\n           intro:'',\r\n           author:'',\r\n           cover:'',\r\n           errors:[],\r\n            category: [],\r\n            selects: [],\r\n        }\r\n    }\r\n\r\n    options = [\r\n        { label: \"PHP\", value: \"1\" },\r\n        { label: \"Laravel\", value: \"2\" },\r\n        { label: \"Nodejs\", value: \"3\" },\r\n        { label: \"Angulajs\", value: \"4\" },\r\n        { label: \"JS\", value: \"5\" },\r\n        { label: \"Java\", value: \"6\" },\r\n        { label: \"Python\", value: \"7\" },\r\n      ];\r\n\r\n    componentDidMount(){\r\n        axios.get(\"/api/category\").then(res => {\r\n            this.setState({\r\n                category : res.data.category\r\n            })\r\n        })\r\n    }\r\n\r\n    onSelectedOptionsChange= (event) => {\r\n        this.setState({\r\n            category : event ? event.map(x => x.value) : [],\r\n            selects : event ? event.map(x => x.label) : []\r\n        })\r\n        console.log(this.state.category)\r\n    }\r\n\r\n    onHandleInputChange= event =>{\r\n        this.setState({\r\n            [event.target.name] : event.target.value,\r\n            errors: [],\r\n        })\r\n    }\r\n\r\n    rules = {\r\n        title:  'required|string|max:255',\r\n        content:'required',\r\n        author: 'required',\r\n        intro: 'required',\r\n        conclusion: 'required',\r\n        cover: 'required|string'\r\n      };\r\n       messages = {\r\n        required: 'The {{ field }} is required.',\r\n        max : 'the title max 255',\r\n      }\r\n      handleSubmit = (event) => {\r\n        event.preventDefault()\r\n        console.log(this.state)\r\n        // validating user data\r\n        const data = {\r\n            title : this.state.title,\r\n            content : this.state.content,\r\n            conclusion : this.state.conclusion,\r\n            intro : this.state.intro,\r\n            author : this.state.author,\r\n            cover : this.state.cover,\r\n            category: this.state.category,\r\n            status : \"public\"\r\n        };\r\n    \r\n        \r\n        validateAll(data,this.rules, this.messages)\r\n        .then(async () => {\r\n          //successfull login\r\n          await axios.post('/api/post', data, {\r\n              headers: {'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")}\r\n          }).then(res =>  {\r\n            window.location.replace('/post/' + res.data.post.id)\r\n          }).catch(errors => {\r\n            console.log(errors.response);\r\n            alert(errors.response.data.errors)\r\n          })\r\n        })\r\n        .catch(errors => {\r\n          console.log('a')\r\n          console.log(errors);\r\n          const formattedErrors = {}\r\n          errors.forEach(error => formattedErrors[error.field] = error.message)\r\n          this.setState({\r\n            errors: formattedErrors\r\n          })\r\n        })\r\n      }\r\n\r\n      onCoverChange = event => {\r\n        if (event.target.files && event.target.files[0]) {\r\n            let img = event.target.files[0];\r\n            var data = new FormData()\r\n            data.append(\"cover\", img)\r\n            axios.post('/api/post/cover/update',data, {\r\n                headers : {\r\n                    'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")\r\n                }\r\n            }).then(res => {\r\n                console.log(res)\r\n                this.setState({\r\n                    cover : res.data.cover\r\n                })\r\n                console.log(this.state.cover)\r\n                alert(res.data.message)\r\n            }).catch(errors => {\r\n                alert(errors.response.data.errors)\r\n            })\r\n          }\r\n    }\r\n\r\n    render(){\r\n        return (\r\n        <div>\r\n        <Banner\r\n        backgroundImage={`url(${process.env.PUBLIC_URL}/assets/img/bg-laptop.jpg)`}\r\n        title=\"Write New Post\"\r\n        />\r\n        {/* END Header */}\r\n        {/* Main container */}\r\n        <main className=\"main-content\">\r\n            <div className=\"row\" style={{height: \"1000px\", padding: \"10px\"}}>\r\n            <div className=\"col-6\">\r\n            <div className=\"text-editor\" >\r\n                <ReactQuill \r\n                    theme=\"snow\"\r\n                    modules={this.modules}\r\n                    formats={this.formats}\r\n                    defaultValue={this.delta}\r\n                    value={this.state.editorHtml}\r\n                    style={{height: '45rem'}}\r\n                    onChange={this.handleChange}\r\n                >\r\n                </ReactQuill>\r\n            </div>\r\n            </div>\r\n            <div className=\"col-6 \" >\r\n            <div className=\"container\" style={{height: \"46px\"}}>\r\n                Bài viết\r\n            </div>\r\n                <div className=\"ql-editor\">\r\n                <div dangerouslySetInnerHTML={{ __html : this.state.editorHtml} } />\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </main>\r\n        {/* END Main container */}\r\n        </div>\r\n\r\n  );\r\n};\r\n}\r\nexport default Createpost;"]},"metadata":{},"sourceType":"module"}