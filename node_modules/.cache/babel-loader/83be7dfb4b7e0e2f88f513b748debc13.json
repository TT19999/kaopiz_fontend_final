{"ast":null,"code":"import _defineProperty from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"F:\\\\xampp\\\\htdocs\\\\kaopiz_fontend_final\\\\src\\\\components\\\\Createpost\\\\CreatePost.jsx\";\nimport React, { Component, useState } from \"react\";\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport Banner from \"../Banner\";\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/creatable';\nimport axios from 'axios';\n\nvar CreatePost =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreatePost, _Component);\n\n  function CreatePost(props) {\n    var _this;\n\n    _classCallCheck(this, CreatePost);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreatePost).call(this, props));\n    _this.modules = {\n      toolbar: [[{\n        'header': [1, 2, 3, 4, false]\n      }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n        'align': []\n      }], [{\n        'list': 'ordered'\n      }, {\n        'list': 'bullet'\n      }, {\n        'indent': '-1'\n      }, {\n        'indent': '+1'\n      }], ['link', 'video'], ['clean']]\n    };\n    _this.formats = ['header', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'align', 'list', 'bullet', 'indent', 'link', 'image', 'video'];\n    _this.options = [];\n\n    _this.handleInputChange = function (html) {\n      _this.setState({\n        editorHtml: html\n      });\n\n      console.log(_this.state.editorHtml);\n    };\n\n    _this.buttonClick = function (event) {\n      _this.setState({\n        editorHtml: _this.state.editorHtml\n      });\n\n      console.log(_this.state.editorHtml);\n    };\n\n    _this.onClickSave = function (event) {\n      console.log(_this.state.categories);\n      var data = {\n        categories: _this.state.categories,\n        title: _this.state.title,\n        content: _this.state.editorHtml,\n        author: localStorage.getItem('userName'),\n        intro: _this.state.intro,\n        status: \"public\",\n        cover: _this.state.cover\n      };\n      console.log(data);\n      axios.post('/api/post', data, {\n        headers: {\n          'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n        }\n      }).then(function (res) {\n        console.log(res);\n        window.location.replace('/post/' + res.data.post.id);\n      }).catch(function (errors) {\n        console.log(errors.response);\n        alert(errors.response.data.errors);\n      });\n    };\n\n    _this.titleChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.handleImageChange = function (event) {\n      console.log(event.target);\n\n      if (event.target.files && event.target.files[0]) {\n        var img = event.target.files[0];\n        var data = new FormData();\n        data.append(\"image\", img);\n        axios.post('/api/image/create', data, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n          }\n        }).then(function (res) {\n          _this.setState({\n            editorHtml: _this.state.editorHtml + '<img src=\"' + res.data.path + '\" />'\n          });\n        }).catch(function (errors) {\n          console.log(errors.response);\n          alert(errors.response.data.errors);\n        });\n      }\n    };\n\n    _this.handleCoverChange = function (event) {\n      if (event.target.files && event.target.files[0]) {\n        var img = event.target.files[0];\n        var data = new FormData();\n        data.append(\"image\", img);\n        axios.post('/api/image/create', data, {\n          headers: {\n            'Authorization': 'Bearer ' + localStorage.getItem(\"userToken\")\n          }\n        }).then(function (res) {\n          _this.setState({\n            cover: res.data.path\n          });\n        }).catch(function (errors) {\n          console.log(errors.response);\n          alert(errors.response.data.errors);\n        });\n      }\n    };\n\n    _this.handleChange = function (newValue, actionMeta) {\n      console.log(newValue);\n\n      _this.setState({\n        // categories : newValue ? newValue.map(x => x.value) : [],\n        categories: newValue\n      });\n    };\n\n    var today = new Date();\n    var date = today.getDate() + \"-\" + (today.getMonth() + 1) + \"-\" + today.getFullYear();\n    _this.state = {\n      text: \"\",\n      editorHtml: \"<h2>Your Content</h2>\",\n      title: \"Your Title Here\",\n      intro: \"\",\n      categories: [{\n        label: \"PNT\",\n        value: \"PNT\"\n      }],\n      categoriesDefault: [],\n      options: [{\n        label: \"PNT\",\n        value: \"PNT\"\n      }],\n      file: '',\n      cover: 'https://storage.googleapis.com/chydlx/codepen/blog-cards/image-1.jpg'\n    };\n    return _this;\n  }\n\n  _createClass(CreatePost, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('/api/category').then(function (res) {\n        _this2.setState({\n          options: res.data.categories ? res.data.categories.map(function (x) {\n            console.log(x);\n            var data = {\n              label: x.name,\n              value: x.name\n            };\n            return data;\n          }) : []\n        });\n\n        console.log(_this2.state.options);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(Banner, {\n        backgroundImage: \"url(\" + this.state.cover + \")\",\n        title: \"Latest Blog Posts\",\n        subtitle: \"Read and get updated on the latest posts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"main\", {\n        className: \"main-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"p-30 bg-gray rounded\",\n        method: \"POST\",\n        \"data-form\": \"mailer\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group col-12 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"form-control form-control-lg\",\n        type: \"text\",\n        placeholder: \"Nh\\u1EADp title n\\u1ED5i b\\u1EADt\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: this.titleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        className: \"form-control form-control-lg\",\n        rows: 2,\n        placeholder: \"T\\xF3m t\\u1EAFt ch\\u1EE7 \\u0111\\u1EC1 b\\xE0i vi\\u1EBFt\",\n        name: \"intro\",\n        defaultValue: \"\",\n        onChange: this.titleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"imageInput112\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, \"Chon \\u1EA2nh b\\xECa cho b\\xE0i vi\\u1EBFt \"), React.createElement(\"input\", {\n        type: \"file\",\n        class: \"form-control-file\",\n        id: \"imageInput112\",\n        onChange: this.handleCoverChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group col-12 col-md-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(CreatableSelect, {\n        isMulti: true,\n        closeMenuOnSelect: false,\n        defaultValue: [this.state.options[0]],\n        onChange: this.handleChange,\n        options: this.state.options,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          minHeight: \"45rem\",\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"text-editor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(ReactQuill, {\n        theme: \"snow\",\n        modules: this.modules,\n        formats: this.formats,\n        value: this.state.editorHtml,\n        style: {\n          height: '45rem'\n        },\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        className: \"col-6 \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container\",\n        style: {\n          height: \"50px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \"B\\xE0i vi\\u1EBFt\"), React.createElement(\"div\", {\n        className: \"text-editor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"quill\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(ReactQuill, {\n        theme: \"bubble\",\n        readOnly: true,\n        value: this.state.editorHtml,\n        style: {\n          height: '45rem'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      })))), React.createElement(\"form\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        style: {\n          paddingLeft: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"imageInput\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, \"Th\\xEAm \\u1EA3nh v\\xE0o b\\xE0i vi\\u1EBFt \"), React.createElement(\"input\", {\n        type: \"file\",\n        class: \"form-control-file\",\n        id: \"imageInput\",\n        onChange: this.handleImageChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      }))))), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        style: {\n          textAlign: 'center',\n          marginLeft: '850px',\n          marginBottom: '20px'\n        },\n        onClick: this.onClickSave,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245\n        },\n        __self: this\n      }, \"\\u0110\\u0103ng b\\xE0i\"));\n    }\n  }]);\n\n  return CreatePost;\n}(Component);\n\nexport { CreatePost as default };","map":{"version":3,"sources":["F:\\xampp\\htdocs\\kaopiz_fontend_final\\src\\components\\Createpost\\CreatePost.jsx"],"names":["React","Component","useState","ReactQuill","Banner","Select","CreatableSelect","axios","CreatePost","props","modules","toolbar","formats","options","handleInputChange","html","setState","editorHtml","console","log","state","buttonClick","event","onClickSave","categories","data","title","content","author","localStorage","getItem","intro","status","cover","post","headers","then","res","window","location","replace","id","catch","errors","response","alert","titleChange","target","name","value","handleImageChange","files","img","FormData","append","path","handleCoverChange","handleChange","newValue","actionMeta","today","Date","date","getDate","getMonth","getFullYear","text","label","categoriesDefault","file","get","map","x","handleSubmit","minHeight","padding","height","paddingLeft","textAlign","marginLeft","marginBottom"],"mappings":"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","sourcesContent":["import React,{ Component , useState } from \"react\";\r\nimport ReactQuill from 'react-quill';\r\nimport 'react-quill/dist/quill.snow.css';\r\nimport Banner from \"../Banner\";\r\nimport Select from 'react-select';\r\nimport CreatableSelect from 'react-select/creatable';\r\nimport axios from 'axios';\r\n\r\nexport default class CreatePost  extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    var today = new Date();\r\n    var date = today.getDate() + \"-\" + (today.getMonth()+1)+ \"-\" + today.getFullYear();\r\n    this.state = {\r\n      text: \"\",\r\n      editorHtml : \"<h2>Your Content</h2>\",\r\n      title: \"Your Title Here\",\r\n      intro: \"\",\r\n      categories: [{ label: \"PNT\", value: \"PNT\" }],\r\n      categoriesDefault: [],\r\n      options: [{ label: \"PNT\", value: \"PNT\" },],\r\n      file:'',\r\n      cover : 'https://storage.googleapis.com/chydlx/codepen/blog-cards/image-1.jpg',\r\n    }\r\n  }\r\n\r\n  modules = {\r\n    toolbar: [\r\n      [{ 'header': [1, 2, 3, 4, false] }],\r\n      ['bold', 'italic', 'underline','strike', 'blockquote'],\r\n      [{'align': []}],\r\n      [{'list': 'ordered'}, {'list': 'bullet'}, {'indent': '-1'}, {'indent': '+1'}],\r\n      ['link', 'video'],\r\n      ['clean']\r\n    ],\r\n  }\r\n\r\n  formats = [\r\n    'header',\r\n    'bold', 'italic', 'underline', 'strike', 'blockquote',\r\n    'align',\r\n    'list', 'bullet', 'indent',\r\n    'link','image', 'video',\r\n  ]\r\n\r\n\r\n  options = []\r\n\r\n    componentDidMount(){\r\n        axios.get('/api/category').then(res => {\r\n            this.setState({\r\n                options: res.data.categories ? res.data.categories.map(x => {\r\n                    console.log(x)\r\n                    var data = ({\r\n                        label : x.name,\r\n                        value : x.name\r\n                    })\r\n                    return data\r\n                }) : []\r\n            })\r\n            console.log(this.state.options)\r\n        })\r\n\r\n    }\r\n\r\n  handleInputChange = html => {\r\n    this.setState({editorHtml : html})\r\n    console.log(this.state.editorHtml)\r\n    \r\n  }\r\n\r\n  buttonClick = (event) =>{\r\n    this.setState({\r\n      editorHtml: this.state.editorHtml\r\n    })\r\n    console.log(this.state.editorHtml)\r\n  } \r\n\r\n  onClickSave = event =>{\r\n      console.log(this.state.categories)\r\n      const data= ({\r\n        categories : this.state.categories,\r\n        title : this.state.title,\r\n        content : this.state.editorHtml,\r\n        author : localStorage.getItem('userName'),\r\n        intro : this.state.intro,\r\n        status : \"public\",\r\n        cover : this.state.cover,\r\n      })\r\n      \r\n      console.log(data)\r\n         axios.post('/api/post', data, {\r\n        headers: {'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")}\r\n        }).then(res =>  {\r\n            console.log(res)\r\n            window.location.replace('/post/' + res.data.post.id)\r\n        }).catch(errors => {\r\n            console.log(errors.response);\r\n            alert(errors.response.data.errors)\r\n        })\r\n  }\r\n\r\n  titleChange = event => {\r\n    this.setState({\r\n        [event.target.name]: event.target.value\r\n    })\r\n  }\r\n\r\n  handleImageChange = event => {\r\n    console.log(event.target)\r\n    if (event.target.files && event.target.files[0]) {\r\n      let img = event.target.files[0];\r\n      var data = new FormData()\r\n      data.append(\"image\", img)\r\n      axios.post('/api/image/create',data, {\r\n          headers : {\r\n              'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")\r\n          }\r\n      }).then(res => {\r\n        this.setState({\r\n          editorHtml : this.state.editorHtml + '<img src=\"'+res.data.path+'\" />'\r\n        })\r\n      }).catch(errors => {\r\n          console.log(errors.response);\r\n          alert(errors.response.data.errors)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleCoverChange = event => {\r\n    if (event.target.files && event.target.files[0]) {\r\n      let img = event.target.files[0];\r\n      var data = new FormData()\r\n      data.append(\"image\", img)\r\n      axios.post('/api/image/create',data, {\r\n          headers : {\r\n              'Authorization' : 'Bearer ' + localStorage.getItem(\"userToken\")\r\n          }\r\n      }).then(res => {\r\n        this.setState({\r\n          cover : res.data.path,\r\n        })\r\n      }).catch(errors => {\r\n          console.log(errors.response);\r\n          alert(errors.response.data.errors)\r\n      })\r\n    }\r\n  }\r\n\r\n  handleChange = (newValue, actionMeta) => {\r\n    console.log(newValue);  \r\n    this.setState({\r\n        // categories : newValue ? newValue.map(x => x.value) : [],\r\n        categories : newValue,\r\n    })\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n      <Banner \r\n      backgroundImage={\"url(\"+this.state.cover+\")\"}\r\n      title=\"Latest Blog Posts\"\r\n      subtitle=\"Read and get updated on the latest posts\"\r\n      />\r\n     \r\n      <main className=\"main-content\"> \r\n        <form className=\"p-30 bg-gray rounded\" method=\"POST\" data-form=\"mailer\" onSubmit={this.handleSubmit}>\r\n            <div className=\"row\">\r\n            <div className=\"form-group col-12 \">\r\n                <input className=\"form-control form-control-lg\" type=\"text\" placeholder=\"Nhập title nổi bật\" name=\"title\" value={this.state.title} onChange={this.titleChange}/>\r\n                {/* {\r\n                        this.state.errors['title'] &&\r\n                        <small className=\"text-danger\">{this.state.errors['title']}</small>\r\n\r\n                    } */}\r\n                </div>\r\n\r\n            </div>\r\n            <div className=\"form-group\">\r\n                <textarea className=\"form-control form-control-lg\" rows={2} placeholder=\"Tóm tắt chủ đề bài viết\" name=\"intro\" defaultValue={\"\"}  onChange={this.titleChange}/>\r\n                {/* {\r\n                        this.state.errors['intro'] &&\r\n                        <small className=\"text-danger\">{this.state.errors['intro']}</small>\r\n\r\n                    } */}\r\n            </div>\r\n            <div class=\"form-group\">\r\n              <label htmlFor='imageInput112' >Chon Ảnh bìa cho bài viết </label>\r\n              <input type=\"file\" class=\"form-control-file\" id='imageInput112'  onChange={this.handleCoverChange}/>\r\n            </div>\r\n            \r\n            <div className=\"form-group col-12 col-md-6\">\r\n            <CreatableSelect\r\n                isMulti\r\n                closeMenuOnSelect={false}\r\n                defaultValue={[this.state.options[0]]}\r\n                onChange={this.handleChange}\r\n                options={this.state.options}\r\n            />\r\n                </div>\r\n        </form>\r\n          <div className=\"row\" style={{minHeight: \"45rem\", padding: \"10px\"}}>\r\n            <div className=\"col-6\">\r\n            <div className=\"text-editor\" >\r\n                <ReactQuill \r\n                    theme=\"snow\"\r\n                    modules={this.modules}\r\n                    formats={this.formats}  \r\n                    value={this.state.editorHtml}\r\n                    style={{height: '45rem'}}\r\n                    onChange={this.handleInputChange}\r\n                >\r\n                </ReactQuill>\r\n            </div>\r\n            </div>\r\n            <div className=\"col-6 \" >\r\n            <div className=\"container\" style={{height: \"50px\"}}>\r\n                Bài viết\r\n            </div>\r\n            <div className=\"text-editor\" >\r\n              <div className='quill'>\r\n                <ReactQuill \r\n                  theme=\"bubble\"\r\n                    readOnly\r\n                    value={this.state.editorHtml}\r\n                    style={{height: '45rem'}}\r\n                >\r\n                </ReactQuill>\r\n              </div>\r\n            </div>\r\n            </div>\r\n            <form>\r\n            <div class=\"form-group\" style={{paddingLeft:'20px'}}>\r\n              <label htmlFor='imageInput' >Thêm ảnh vào bài viết </label>\r\n              <input type=\"file\" class=\"form-control-file\" id='imageInput'  onChange={this.handleImageChange}/>\r\n            </div>\r\n          </form>\r\n        </div>\r\n        \r\n      </main>\r\n\r\n      \r\n      \r\n      <button type=\"submit\" className=\"btn btn-primary\" style={{textAlign : 'center', marginLeft : '850px', marginBottom:'20px'}} onClick={this.onClickSave}>\r\n          Đăng bài\r\n      </button>\r\n      </>\r\n    );\r\n  }\r\n  \r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}